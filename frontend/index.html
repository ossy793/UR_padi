<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>URPadi</title>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,300&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <style>
    :root {
      --bg:      #070b14;
      --surface: #0d1526;
      --border:  #1a2640;
      --accent:  #ef4444;
      --accent2: #dc2626;
      --danger:  #b91c1c;
      --warning: #f59e0b;
      --purple:  #a855f7;
      --text:    #e2e8f0;
      --muted:   #64748b;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { background: var(--bg); color: var(--text); font-family: 'DM Sans', sans-serif; min-height: 100vh; overflow-x: hidden; }
    h1,h2,h3,.font-syne { font-family: 'Syne', sans-serif; }
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: var(--bg); }
    ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }

    body::before {
      content: ''; position: fixed; inset: 0;
      background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 60h60M60 0v60' stroke='%231a2640' stroke-width='.5'/%3E%3C/svg%3E");
      opacity: .4; pointer-events: none; z-index: 0;
    }
    button {
        touch-action: manipulation;
    }
    /* â”€â”€ AUTH â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #auth-overlay {
      position: fixed; inset: 0; z-index: 100;
      background: var(--bg); display: flex; align-items: center; justify-content: center;
      overflow-y: auto; padding: 24px;
    }
    .auth-box {
      background: var(--surface); border: 1px solid var(--border);
      border-radius: 20px; padding: 36px; width: 100%; max-width: 520px;
      margin: auto;
    }
    .auth-logo { font-family: 'Syne', sans-serif; font-size: 28px; font-weight: 800; color: var(--accent); margin-bottom: 4px; }
    .auth-sub  { color: var(--muted); font-size: 13px; margin-bottom: 28px; }
    .tab-row   { display: grid; grid-template-columns: 1fr 1fr; gap: 6px; margin-bottom: 24px; background: var(--bg); border-radius: 12px; padding: 4px; }

    /* â”€â”€ LAYOUT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #sidebar {
      width: 240px; position: fixed; top: 0; left: 0; bottom: 0; z-index: 10;
      background: var(--surface); border-right: 1px solid var(--border);
      display: flex; flex-direction: column;
    }
    #main-content { margin-left: 240px; padding: 32px; position: relative; z-index: 1; min-height: 100vh; }

    .nav-item {
      display: flex; align-items: center; gap: 12px;
      padding: 12px 20px; border-radius: 10px; cursor: pointer;
      transition: all .2s; color: var(--muted); font-size: 14px; font-weight: 500;
    }
    .nav-item:hover, .nav-item.active { background: #1a2640; color: var(--text); }
    .nav-item.active { color: var(--accent); }
    .nav-item .icon { font-size: 18px; width: 22px; text-align: center; }

    /* â”€â”€ PAGES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .page { display: none; }
    .page.active { display: block; animation: fadeIn .3s; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }

    /* â”€â”€ COMPONENTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .card {
      background: var(--surface); border: 1px solid var(--border);
      border-radius: 16px; padding: 24px; position: relative; z-index: 1;
    }
    .inp {
      width: 100%; background: var(--bg); border: 1px solid var(--border);
      color: var(--text); border-radius: 10px; padding: 12px 16px;
      font-family: 'DM Sans', sans-serif; font-size: 14px; outline: none; transition: border-color .2s;
    }
    .inp:focus { border-color: var(--accent); }
    .inp option { background: var(--bg); }

    .btn-primary {
      background: var(--accent); color: #070b14; border: none;
      border-radius: 10px; padding: 12px 24px;
      font-family: 'Syne', sans-serif; font-weight: 700; font-size: 14px;
      cursor: pointer; transition: all .2s; display: inline-flex; align-items: center; gap: 8px;
    }
    .btn-primary:hover:not(:disabled) { transform: translateY(-1px); box-shadow: 0 8px 24px #00e5a040; }
    .btn-primary:disabled { opacity: .5; cursor: not-allowed; }
    .btn-ghost {
      background: transparent; color: var(--text); border: 1px solid var(--border);
      border-radius: 10px; padding: 10px 20px; font-family: 'DM Sans', sans-serif;
      font-size: 14px; cursor: pointer; transition: all .2s;
    }
    .btn-ghost:hover { border-color: var(--accent); color: var(--accent); }

    .badge { border-radius: 20px; padding: 4px 14px; font-size: 12px; font-weight: 600; display: inline-block; }
    .badge-low    { background: #00e5a020; color: var(--accent);  border: 1px solid #00e5a040; }
    .badge-medium { background: #f59e0b20; color: var(--warning); border: 1px solid #f59e0b40; }
    .badge-high   { background: #f43f5e20; color: var(--danger);  border: 1px solid #f43f5e40; }

    .stat-card { background: var(--surface); border: 1px solid var(--border); border-radius: 16px; padding: 24px; }
    .stat-label { font-size: 11px; font-weight: 700; letter-spacing: .08em; color: var(--muted); margin-bottom: 12px; }
    .stat-value { font-family: 'Syne', sans-serif; font-size: 36px; font-weight: 800; color: var(--accent); }

    .premium-card { border-color: #7c3aed44; background: linear-gradient(135deg, #0d1526, #1a0d2e); }
    .premium-badge {
      background: linear-gradient(90deg, #7c3aed, #a855f7); color: #fff;
      font-size: 10px; font-weight: 800; letter-spacing: .1em;
      padding: 4px 12px; border-radius: 100px;
    }

    /* â”€â”€ SPINNER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .spinner {
      width: 16px; height: 16px; border: 2px solid currentColor;
      border-top-color: transparent; border-radius: 50%;
      animation: spin .6s linear infinite; display: inline-block;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
    @keyframes pulse { 0%,100% { opacity:1; } 50% { opacity:.4; } }

    /* â”€â”€ TOAST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #toast {
      position: fixed; bottom: 24px; right: 24px; z-index: 9999;
      background: var(--surface); border: 1px solid var(--border);
      border-radius: 12px; padding: 14px 20px; font-size: 14px;
      box-shadow: 0 8px 32px #00000080; transform: translateY(80px);
      opacity: 0; transition: all .3s; pointer-events: none; max-width: 360px;
    }
    #toast.show { transform: translateY(0); opacity: 1; }

    /* â”€â”€ REGISTER GRID â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .reg-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    .reg-grid .full { grid-column: 1 / -1; }

    /* â”€â”€ MAP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #malaria-map { height: 420px; border-radius: 16px; }

    /* â”€â”€ RING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .ring-container { position: relative; width: 120px; height: 120px; flex-shrink: 0; }
    .ring-container svg { transform: rotate(-90deg); }
    .ring-bg   { fill: none; stroke: var(--border); stroke-width: 8; }
    .ring-fill { fill: none; stroke-width: 8; stroke-linecap: round; transition: stroke-dashoffset 1.2s ease; }
    .ring-text { position: absolute; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; }

    /* â”€â”€ QUESTION OPTION BUTTON â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .q-option {
      text-align: left; padding: 11px 14px; border-radius: 10px;
      background: var(--bg); border: 1px solid var(--border);
      color: var(--text); cursor: pointer; font-size: 13px;
      transition: all .18s; width: 100%; font-family: 'DM Sans', sans-serif;
    }
    .q-option:hover { border-color: var(--accent); color: var(--accent); }
    .q-option.selected { background: #00e5a015; border-color: var(--accent); color: var(--accent); font-weight: 600; }

    /* â”€â”€ PROGRESS BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .prog-track { background: var(--border); border-radius: 100px; height: 4px; overflow: hidden; }
    .prog-fill  { height: 100%; border-radius: 100px; transition: width .4s ease; }

    /* â”€â”€ WS INDICATOR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #ws-indicator { display: flex; align-items: center; gap: 6px; font-size: 12px; color: var(--muted); }
  </style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!--  AUTH OVERLAY                                  -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="auth-overlay">
  <div class="auth-box">
    <div class="auth-logo">$URPadi</div>
    <div class="auth-sub">Data to Prevention</div>

    <!-- Tabs -->
    <div class="tab-row">
      <button id="tab-login"    class="btn-primary" onclick="switchAuthTab('login')"    style="justify-content:center;border-radius:9px;">Sign In</button>
      <button id="tab-register" class="btn-ghost"   onclick="switchAuthTab('register')" style="justify-content:center;border-radius:9px;">Register</button>
    </div>

    <!-- LOGIN -->
    <div id="form-login">
      <div style="display:flex;flex-direction:column;gap:12px;">
        <input class="inp" id="login-email"    type="email"    placeholder="Email address" />
        <input class="inp" id="login-password" type="password" placeholder="Password" />
        <button class="btn-primary" id="login-btn" onclick="doLogin()" style="width:100%;justify-content:center;margin-top:4px;">Sign In</button>
      </div>
      <p style="text-align:center;font-size:12px;color:var(--muted);margin-top:16px;">Register first, then sign in with your credentials.</p>
    </div>

    <!-- REGISTER -->
    <div id="form-register" style="display:none;">
      <div class="reg-grid">
        <input class="inp full" id="reg-email"    type="email"    placeholder="Email address" />
        <input class="inp"      id="reg-username"                 placeholder="Username" />
        <input class="inp"      id="reg-password" type="password" placeholder="Password" />
        <input class="inp"      id="reg-age"      type="number"   placeholder="Age" min="1" max="120" />
        <select class="inp" id="reg-gender">
          <option value="">Gender</option>
          <option value="male">Male</option>
          <option value="female">Female</option>
          <option value="other">Other</option>
        </select>
        <input class="inp" id="reg-height" type="number" placeholder="Height (cm)" />
        <input class="inp" id="reg-weight" type="number" placeholder="Weight (kg)" />
        <select class="inp" id="reg-genotype">
          <option value="">Genotype</option>
          <option value="AA">AA</option><option value="AS">AS</option>
          <option value="SS">SS</option><option value="AC">AC</option>
        </select>
        <select class="inp" id="reg-blood">
          <option value="">Blood Group</option>
          <option value="A+">A+</option><option value="A-">A-</option>
          <option value="B+">B+</option><option value="B-">B-</option>
          <option value="O+">O+</option><option value="O-">O-</option>
          <option value="AB+">AB+</option><option value="AB-">AB-</option>
        </select>
        <input class="inp full" id="reg-location" type="text" placeholder="City / Region" />

        <!-- Medical Report Upload -->
        <div class="full">
          <div style="font-size:12px;font-weight:600;color:var(--muted);margin-bottom:8px;">
            Medical Report <span style="opacity:.5;">(optional â€” PDF, PNG, JPG, DOC Â· max 10MB)</span>
          </div>
          <label id="report-label" style="display:flex;align-items:center;gap:10px;background:var(--bg);
            border:1px dashed var(--border);border-radius:10px;padding:13px 16px;cursor:pointer;
            transition:border-color .2s;font-size:13px;color:var(--muted);">
            <span style="font-size:20px;">ğŸ“„</span>
            <span id="report-filename">Click to upload medical report</span>
            <input type="file" id="reg-medical-report" accept=".pdf,.png,.jpg,.jpeg,.doc,.docx"
              style="display:none;" onchange="handleReportSelect(this)" />
          </label>
        </div>

        <!-- Family History -->
        <div class="full">
          <div style="font-size:12px;font-weight:600;color:var(--muted);margin-bottom:10px;">Family History</div>
          <div style="display:flex;gap:20px;">
            <label style="display:flex;align-items:center;gap:8px;font-size:13px;cursor:pointer;">
              <input type="checkbox" id="fh-hyp" style="accent-color:var(--accent);" /> Hypertension
            </label>
            <label style="display:flex;align-items:center;gap:8px;font-size:13px;cursor:pointer;">
              <input type="checkbox" id="fh-diabetes" style="accent-color:var(--accent);" /> Diabetes
            </label>
          </div>
        </div>

        <button class="btn-primary full" id="reg-btn" onclick="doRegister()" style="justify-content:center;margin-top:4px;">
          Create Account
        </button>
      </div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!--  MAIN APP                                      -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="app" style="display:none;">

  <!-- SIDEBAR -->
  <aside id="sidebar">
    <div style="padding:24px 20px;border-bottom:1px solid var(--border);">
      <div style="font-family:'Syne',sans-serif;font-weight:800;font-size:18px;color:var(--accent);">$ URPadi</div>
      <div id="sidebar-username" style="font-size:12px;color:var(--muted);margin-top:2px;"></div>
    </div>

    <nav style="padding:16px 12px;flex:1;overflow-y:auto;">
      <div class="nav-item active" id="nav-dashboard"  onclick="showPage('dashboard')">
        <span class="icon">ğŸ </span> Dashboard
      </div>
      <div class="nav-item" id="nav-prediction" onclick="showPage('prediction')">
        <span class="icon">ğŸ“Š</span> Risk Analysis
      </div>
      <div class="nav-item" id="nav-scores" onclick="showPage('scores')">
        <span class="icon">ğŸ“‹</span> Health Score
      </div>
      <div class="nav-item" id="nav-mental" onclick="showPage('mental')">
        <span class="icon">ğŸ§ </span> Mental Check-in
      </div>
      <div class="nav-item" id="nav-map" onclick="showPage('map')">
        <span class="icon">ğŸ—ºï¸</span> Risk Map
      </div>
      <div class="nav-item" id="nav-leaderboard" onclick="showPage('leaderboard')">
        <span class="icon">ğŸ†</span> Leaderboard
      </div>
      <div class="nav-item" id="nav-premium" onclick="showPage('premium')">
        <span class="icon">â­</span> Premium
      </div>
    </nav>

    <div style="padding:16px 20px;border-top:1px solid var(--border);">
      <div style="display:flex;align-items:center;gap:16px;margin-bottom:14px;">
        <div>
          <div style="font-size:11px;color:var(--muted);">STREAK</div>
          <div style="font-size:13px;">ğŸ”¥ <span id="sidebar-streak">0</span></div>
        </div>
        <div>
          <div style="font-size:11px;color:var(--muted);">POINTS</div>
          <div style="font-size:13px;color:var(--accent2);font-weight:700;"><span id="sidebar-points">0</span></div>
        </div>
      </div>
      <button class="btn-ghost" onclick="doLogout()" style="width:100%;justify-content:center;font-size:13px;">Sign Out</button>
    </div>
  </aside>

  <main id="main-content">

    <!-- â”€â”€ DASHBOARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div class="page active" id="page-dashboard">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:28px;">
        <div>
          <h2 style="font-size:28px;font-weight:800;">Good day, <span style="color:var(--accent);" id="dash-name"></span> ğŸ‘‹</h2>
          <p style="color:var(--muted);margin-top:4px;">Here's your health overview</p>
        </div>
        <div id="ws-indicator">
          <div style="width:8px;height:8px;border-radius:50%;background:var(--border);"></div> Connectingâ€¦
        </div>
      </div>

      <!-- Stats row -->
      <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:28px;">
        <div class="stat-card">
          <div class="stat-label">HEALTH SCORE</div>
          <div class="stat-value" id="dash-score">â€”</div>
          <div style="font-size:12px;color:var(--muted);margin-top:4px;">/ 100</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">STREAK</div>
          <div style="display:flex;align-items:center;gap:8px;margin-top:4px;">
            <span style="font-size:28px;">ğŸ”¥</span>
            <span class="stat-value" id="dash-streak">0</span>
          </div>
          <div style="font-size:12px;color:var(--muted);margin-top:4px;">days</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">POINTS</div>
          <div style="display:flex;align-items:center;gap:8px;margin-top:4px;">
            <span style="font-size:28px;">â­</span>
            <span class="stat-value" style="color:var(--accent2);" id="dash-points">0</span>
          </div>
          <div style="font-size:12px;color:var(--muted);margin-top:4px;">total</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">ACCOUNT</div>
          <div style="font-family:'Syne',sans-serif;font-size:22px;font-weight:800;margin-top:4px;" id="dash-plan">Free</div>
          <div style="margin-top:6px;">
            <a onclick="showPage('premium')" style="font-size:12px;color:var(--accent);cursor:pointer;">Upgrade â†—</a>
          </div>
        </div>
      </div>

      <!-- Charts + actions -->
      <div style="display:grid;grid-template-columns:2fr 1fr;gap:24px;margin-bottom:24px;">
        <div class="card">
          <div style="font-weight:700;margin-bottom:16px;font-family:'Syne',sans-serif;">ğŸ“ˆ Weekly Health Trend</div>
          <canvas id="health-chart" height="180"></canvas>
        </div>
        <div class="card">
          <div style="font-weight:700;margin-bottom:16px;font-family:'Syne',sans-serif;">âš¡ Quick Actions</div>
          <div style="display:flex;flex-direction:column;gap:10px;">
            <button class="btn-primary" onclick="showPage('scores')"     style="width:100%;justify-content:center;">ğŸ“‹ Daily Check-in</button>
            <button class="btn-primary" onclick="showPage('prediction')" style="width:100%;justify-content:center;background:#3b82f6;">ğŸ“Š Risk Analysis</button>
            <button class="btn-ghost"   onclick="showPage('mental')"     style="width:100%;justify-content:center;">ğŸ§  Mental Check-in</button>
            <button class="btn-ghost"   onclick="showPage('map')"        style="width:100%;justify-content:center;">ğŸ—ºï¸ Risk Map</button>
          </div>
        </div>
      </div>

      <!-- Latest cards -->
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:24px;">
        <div class="card" id="dash-latest-pred">
          <div style="font-weight:700;font-family:'Syne',sans-serif;margin-bottom:12px;">Latest Risk Assessment</div>
          <div style="color:var(--muted);font-size:14px;">Run a risk analysis to see results here.</div>
        </div>
        <div class="card" id="dash-latest-mental">
          <div style="font-weight:700;font-family:'Syne',sans-serif;margin-bottom:12px;">Mental Wellness</div>
          <div style="color:var(--muted);font-size:14px;">Complete a mental check-in to see your status.</div>
        </div>
      </div>
    </div>

    <!-- â”€â”€ RISK ANALYSIS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div class="page" id="page-prediction">
      <h2 style="font-size:24px;font-weight:800;margin-bottom:6px;">Risk Analysis</h2>
      <p style="color:var(--muted);margin-bottom:28px;">AI-powered health risk prediction using your profile data</p>

      <div style="display:grid;grid-template-columns:1fr 1fr;gap:24px;margin-bottom:24px;">
        <!-- Hypertension -->
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;">
            <div>
              <div style="font-weight:700;font-size:16px;font-family:'Syne',sans-serif;">ğŸ«€ Hypertension Risk</div>
              <div style="font-size:12px;color:var(--muted);margin-top:2px;">Based on your health profile</div>
            </div>
            <button class="btn-primary" onclick="runPrediction('hypertension')" id="btn-hyp" style="padding:9px 18px;font-size:13px;">Analyse</button>
          </div>
          <div id="hyp-result" style="display:none;">
            <div style="display:flex;align-items:center;gap:20px;margin-bottom:16px;">
              <div class="ring-container">
                <svg viewBox="0 0 120 120" width="120" height="120">
                  <circle class="ring-bg" cx="60" cy="60" r="52"/>
                  <circle class="ring-fill" id="hyp-ring" cx="60" cy="60" r="52"
                    stroke-dasharray="327" stroke-dashoffset="327" style="stroke:var(--accent2);"/>
                </svg>
                <div class="ring-text">
                  <span style="font-size:22px;font-weight:800;font-family:'Syne',sans-serif;" id="hyp-pct">â€”</span>
                  <span style="font-size:10px;color:var(--muted);">RISK</span>
                </div>
              </div>
              <div>
                <span class="badge" id="hyp-badge"></span>
                <div style="font-size:13px;color:var(--muted);margin-top:8px;" id="hyp-level"></div>
              </div>
            </div>
            <div style="font-size:13px;line-height:1.7;margin-bottom:12px;" id="hyp-explanation"></div>
            <div style="background:var(--bg);border-radius:10px;padding:14px;">
              <div style="font-size:11px;font-weight:700;color:var(--accent2);margin-bottom:8px;">ğŸ›¡ï¸ PREVENTION</div>
              <div style="font-size:13px;line-height:1.7;" id="hyp-advice"></div>
            </div>
          </div>
        </div>

        <!-- Malaria -->
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;">
            <div>
              <div style="font-weight:700;font-size:16px;font-family:'Syne',sans-serif;">ğŸ¦Ÿ Malaria Risk</div>
              <div style="font-size:12px;color:var(--muted);margin-top:2px;">Based on location & profile</div>
            </div>
            <button class="btn-primary" onclick="runPrediction('malaria')" id="btn-mal" style="padding:9px 18px;font-size:13px;">Analyse</button>
          </div>
          <div id="mal-result" style="display:none;">
            <div style="display:flex;align-items:center;gap:20px;margin-bottom:16px;">
              <div class="ring-container">
                <svg viewBox="0 0 120 120" width="120" height="120">
                  <circle class="ring-bg" cx="60" cy="60" r="52"/>
                  <circle class="ring-fill" id="mal-ring" cx="60" cy="60" r="52"
                    stroke-dasharray="327" stroke-dashoffset="327" style="stroke:var(--danger);"/>
                </svg>
                <div class="ring-text">
                  <span style="font-size:22px;font-weight:800;font-family:'Syne',sans-serif;" id="mal-pct">â€”</span>
                  <span style="font-size:10px;color:var(--muted);">RISK</span>
                </div>
              </div>
              <div>
                <span class="badge" id="mal-badge"></span>
                <div style="font-size:13px;color:var(--muted);margin-top:8px;" id="mal-level"></div>
              </div>
            </div>
            <div style="font-size:13px;line-height:1.7;margin-bottom:12px;" id="mal-explanation"></div>
            <div style="background:var(--bg);border-radius:10px;padding:14px;">
              <div style="font-size:11px;font-weight:700;color:var(--danger);margin-bottom:8px;">ğŸ›¡ï¸ PREVENTION</div>
              <div style="font-size:13px;line-height:1.7;" id="mal-advice"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- History table -->
      <div class="card">
        <div style="font-weight:700;font-family:'Syne',sans-serif;margin-bottom:16px;">Prediction History</div>
        <div id="prediction-history" style="color:var(--muted);font-size:14px;">No predictions yet.</div>
      </div>
    </div>

    <!-- â”€â”€ DAILY GAMIFIED QUESTIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div class="page" id="page-scores">
      <h2 style="font-size:24px;font-weight:800;margin-bottom:6px;">Daily Health Check-in</h2>
      <p style="color:var(--muted);margin-bottom:28px;">Answer today's AI-generated questions to earn points &amp; track your health ğŸ¯</p>

      <div style="display:grid;grid-template-columns:1fr 1fr;gap:24px;">

        <!-- LEFT: Questions / Result panel -->
        <div>
          <!-- Loading state -->
          <div class="card" id="qs-loading" style="text-align:center;padding:60px 24px;">
            <div class="spinner" style="margin:0 auto 16px;width:28px;height:28px;border-width:3px;"></div>
            <div style="color:var(--muted);font-size:14px;">Generating today's questionsâ€¦</div>
          </div>

          <!-- Already completed today -->
          <div class="card" id="qs-done" style="display:none;text-align:center;padding:40px 24px;">
            <div style="font-size:60px;margin-bottom:12px;" id="qs-done-badge-icon">ğŸ†</div>
            <div style="font-family:'Syne',sans-serif;font-size:22px;font-weight:800;color:var(--accent);margin-bottom:6px;" id="qs-done-badge">Health Champion</div>
            <div style="font-size:13px;color:var(--muted);margin-bottom:20px;" id="qs-done-msg">Great work today!</div>
            <div style="font-size:56px;font-weight:900;font-family:'Syne',sans-serif;color:var(--accent);line-height:1;" id="qs-done-score">â€”</div>
            <div style="font-size:13px;color:var(--muted);margin-bottom:20px;">/ 100 today</div>
            <div id="qs-done-cats" style="display:grid;grid-template-columns:1fr 1fr;gap:10px;text-align:center;"></div>
            <div style="color:var(--muted);font-size:12px;margin-top:20px;">ğŸŒ… New questions unlock tomorrow</div>
          </div>

          <!-- Active questions form -->
          <div id="qs-form" style="display:none;">
            <!-- Header bar -->
            <div class="card" style="padding:14px 20px;margin-bottom:14px;display:flex;justify-content:space-between;align-items:center;">
              <div>
                <div style="font-size:11px;color:var(--muted);font-weight:700;letter-spacing:.06em;">TODAY'S CHECK-IN</div>
                <div style="font-family:'Syne',sans-serif;font-weight:700;font-size:14px;" id="qs-date"></div>
              </div>
              <div style="font-size:13px;color:var(--accent);font-weight:700;" id="qs-progress-text">0 / 0</div>
            </div>

            <!-- Progress bar -->
            <div class="prog-track" style="margin-bottom:18px;">
              <div id="qs-progress-bar" class="prog-fill" style="background:var(--accent);width:0%;"></div>
            </div>

            <!-- Question cards injected here -->
            <div id="qs-questions-list" style="display:flex;flex-direction:column;gap:16px;"></div>

            <button class="btn-primary" onclick="submitDailyQuestions()" id="qs-submit-btn"
              style="width:100%;justify-content:center;margin-top:24px;" disabled>
              ğŸ¯ Submit &amp; Get Your Score
            </button>
          </div>
        </div>

        <!-- RIGHT: Chart + Category breakdown + ML preview -->
        <div style="display:flex;flex-direction:column;gap:20px;">
          <!-- Score history chart -->
          <div class="card">
            <div style="font-weight:700;font-family:'Syne',sans-serif;margin-bottom:16px;">ğŸ“ˆ Score History</div>
            <canvas id="score-chart" height="200"></canvas>
            <div id="score-chart-empty" style="text-align:center;padding:40px 0;color:var(--muted);font-size:14px;display:none;">
              Complete your first check-in to see score history
            </div>
          </div>

          <!-- Category breakdown (shown after submission) -->
          <div class="card" id="qs-category-card" style="display:none;">
            <div style="font-weight:700;font-family:'Syne',sans-serif;margin-bottom:16px;">ğŸ“Š Today's Breakdown</div>
            <div id="qs-category-bars" style="display:flex;flex-direction:column;gap:14px;"></div>
          </div>

          <!-- ML feature output -->
          <div class="card">
            <div style="font-size:11px;font-weight:700;color:var(--accent);margin-bottom:6px;letter-spacing:.08em;">âš™ï¸ ML FEATURE OUTPUT</div>
            <div style="font-size:11px;color:var(--muted);margin-bottom:10px;">Structured features fed into the risk prediction model</div>
            <pre id="qs-ml-preview" style="font-size:10px;color:#64748b;background:var(--bg);padding:12px;
              border-radius:8px;overflow-x:auto;line-height:1.7;white-space:pre-wrap;">Submit today's check-in to see ML features</pre>
          </div>
        </div>
      </div>
    </div>

    <!-- â”€â”€ MENTAL CHECK-IN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div class="page" id="page-mental">
      <h2 style="font-size:24px;font-weight:800;margin-bottom:6px;">Mental Health Check-in</h2>
      <p style="color:var(--muted);margin-bottom:28px;">Share how you're feeling â€” AI will provide personalised support</p>

      <div style="display:grid;grid-template-columns:1fr 1fr;gap:24px;margin-bottom:24px;">
        <!-- Input -->
        <div class="card">
          <div style="font-weight:700;font-family:'Syne',sans-serif;margin-bottom:16px;">ğŸ¤ How are you feeling?</div>
          <textarea class="inp" id="mental-input" rows="6"
            placeholder="Describe your mood, stress level, or any thoughts on your mindâ€¦"
            style="resize:none;line-height:1.6;"></textarea>
          <div style="display:flex;gap:12px;margin-top:16px;">
            <button class="btn-primary" onclick="submitMentalCheckin()" id="mental-btn" style="flex:1;justify-content:center;">
              Analyse with AI
            </button>
            <button class="btn-ghost" onclick="startVoiceSimulation()" style="padding:10px 16px;" title="Simulate voice input">
              ğŸ¤
            </button>
          </div>
        </div>

        <!-- AI result -->
        <div class="card" id="mental-result-card" style="display:none;">
          <div style="font-weight:700;font-family:'Syne',sans-serif;margin-bottom:16px;">AI Assessment</div>
          <div style="display:flex;align-items:center;gap:12px;margin-bottom:16px;padding:14px;background:var(--bg);border-radius:10px;">
            <div id="sentiment-icon" style="font-size:32px;"></div>
            <div>
              <div id="emotional-state" style="font-weight:600;font-size:16px;"></div>
              <div id="sentiment-label" style="font-size:13px;color:var(--muted);"></div>
            </div>
          </div>
          <div id="claude-response" style="font-size:14px;line-height:1.7;margin-bottom:16px;"></div>
          <div style="background:var(--bg);border-radius:10px;padding:14px;">
            <div style="font-size:11px;font-weight:700;color:var(--accent);margin-bottom:8px;">ğŸ’¡ COPING STRATEGIES</div>
            <div id="coping-suggestions" style="font-size:13px;line-height:1.8;"></div>
          </div>
        </div>
      </div>

      <!-- History -->
      <div class="card">
        <div style="font-weight:700;font-family:'Syne',sans-serif;margin-bottom:16px;">Check-in History</div>
        <div id="mental-history" style="color:var(--muted);font-size:14px;">No check-ins yet.</div>
      </div>
    </div>

    <!-- â”€â”€ RISK MAP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div class="page" id="page-map">
      <h2 style="font-size:24px;font-weight:800;margin-bottom:6px;">Malaria Risk Map</h2>
      <p style="color:var(--muted);margin-bottom:28px;">Location-based prevention intelligence</p>

      <div style="display:grid;grid-template-columns:2fr 1fr;gap:24px;">
        <div class="card" style="padding:0;overflow:hidden;">
          <div id="malaria-map"></div>
        </div>
        <div style="display:flex;flex-direction:column;gap:16px;">
          <div class="card">
            <div style="font-weight:700;font-family:'Syne',sans-serif;margin-bottom:12px;">Risk Legend</div>
            <div style="display:flex;flex-direction:column;gap:10px;font-size:13px;">
              <div style="display:flex;align-items:center;gap:10px;">
                <div style="width:14px;height:14px;border-radius:50%;background:#f43f5e;flex-shrink:0;"></div>
                <span><strong>High</strong> â€” Year-round transmission</span>
              </div>
              <div style="display:flex;align-items:center;gap:10px;">
                <div style="width:14px;height:14px;border-radius:50%;background:#f59e0b;flex-shrink:0;"></div>
                <span><strong>Medium</strong> â€” Seasonal</span>
              </div>
              <div style="display:flex;align-items:center;gap:10px;">
                <div style="width:14px;height:14px;border-radius:50%;background:#00e5a0;flex-shrink:0;"></div>
                <span><strong>Low</strong> â€” Sporadic cases</span>
              </div>
            </div>
          </div>
          <div class="card">
            <div style="font-weight:700;font-family:'Syne',sans-serif;margin-bottom:12px;">ğŸ›¡ï¸ Prevention Tips</div>
            <ul style="font-size:13px;line-height:2.2;list-style:none;">
              <li>âœ“ Use insecticide-treated bed nets</li>
              <li>âœ“ Apply mosquito repellent (DEET)</li>
              <li>âœ“ Wear long sleeves at dusk/dawn</li>
              <li>âœ“ Eliminate standing water</li>
              <li>âœ“ Take prophylaxis when travelling</li>
              <li>âœ“ Seek treatment within 24h of fever</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- â”€â”€ LEADERBOARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div class="page" id="page-leaderboard">
      <h2 style="font-size:24px;font-weight:800;margin-bottom:6px;">ğŸ† Health Champions</h2>
      <p style="color:var(--muted);margin-bottom:28px;">Top users ranked by health engagement points</p>
      <div class="card" style="max-width:640px;">
        <div id="leaderboard-list" style="text-align:center;padding:24px;color:var(--muted);">
          <div class="spinner" style="margin:0 auto;"></div>
        </div>
      </div>
    </div>

    <!-- â”€â”€ PREMIUM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div class="page" id="page-premium">
      <h2 style="font-size:24px;font-weight:800;margin-bottom:6px;">â­ Premium Plan</h2>
      <p style="color:var(--muted);margin-bottom:28px;">Unlock advanced health analytics and personalised reports</p>

      <div style="display:grid;grid-template-columns:1fr 1fr;gap:24px;max-width:900px;">
        <!-- Free -->
        <div class="card">
          <div style="font-family:'Syne',sans-serif;font-weight:800;font-size:22px;margin-bottom:4px;">Free</div>
          <div style="font-size:13px;color:var(--muted);margin-bottom:20px;">Basic health tracking</div>
          <div style="font-size:28px;font-weight:800;font-family:'Syne',sans-serif;margin-bottom:20px;">
            â‚¦0<span style="font-size:14px;color:var(--muted);font-weight:400;">/mo</span>
          </div>
          <ul style="font-size:14px;line-height:2.4;list-style:none;color:var(--muted);">
            <li>âœ“ Risk predictions</li>
            <li>âœ“ Daily gamified questions</li>
            <li>âœ“ Mental check-in</li>
            <li>âœ“ Leaderboard access</li>
            <li style="opacity:.4;">âœ— Advanced analytics</li>
            <li style="opacity:.4;">âœ— Weekly PDF reports</li>
            <li style="opacity:.4;">âœ— Practitioner chat</li>
          </ul>
        </div>

        <!-- Premium -->
        <div class="card premium-card" style="position:relative;">
          <div style="position:absolute;top:-12px;left:50%;transform:translateX(-50%);">
            <span class="premium-badge">MOST POPULAR</span>
          </div>
          <div style="font-family:'Syne',sans-serif;font-weight:800;font-size:22px;margin-bottom:4px;color:#a855f7;">Premium</div>
          <div style="font-size:13px;color:var(--muted);margin-bottom:20px;">Full health intelligence</div>
          <div style="font-size:28px;font-weight:800;font-family:'Syne',sans-serif;margin-bottom:20px;">
            â‚¦5,000<span style="font-size:14px;color:var(--muted);font-weight:400;">/mo</span>
          </div>
          <ul style="font-size:14px;line-height:2.4;list-style:none;margin-bottom:24px;">
            <li>âœ“ Everything in Free</li>
            <li>âœ“ Advanced analytics dashboard</li>
            <li>âœ“ Detailed weekly PDF reports</li>
            <li>âœ“ Practitioner chat simulation</li>
            <li>âœ“ Priority AI analysis</li>
            <li>âœ“ Unlimited mental check-ins</li>
          </ul>
          <button class="btn-primary" onclick="initiatePayment()" id="pay-btn"
            style="width:100%;justify-content:center;background:linear-gradient(90deg,#7c3aed,#a855f7);">
            Upgrade to Premium
          </button>
          <div style="text-align:center;font-size:12px;color:var(--muted);margin-top:12px;">
            Secured by <strong>Paystack</strong> Â· Demo mode available
          </div>
        </div>
      </div>

      <!-- Premium unlocked panel -->
      <div id="premium-features" style="display:none;margin-top:24px;">
        <div class="card premium-card">
          <div style="display:flex;align-items:center;gap:10px;margin-bottom:20px;">
            <span class="premium-badge">PREMIUM</span>
            <span style="font-family:'Syne',sans-serif;font-weight:700;">Advanced Analytics Unlocked</span>
          </div>
          <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:16px;">
            <div style="background:var(--bg);border-radius:12px;padding:16px;text-align:center;">
              <div style="font-size:28px;margin-bottom:8px;">ğŸ“ˆ</div>
              <div style="font-size:13px;font-weight:600;">Risk Trend Analysis</div>
              <div style="font-size:12px;color:var(--muted);margin-top:4px;">30-day prediction curves</div>
            </div>
            <div style="background:var(--bg);border-radius:12px;padding:16px;text-align:center;">
              <div style="font-size:28px;margin-bottom:8px;">ğŸ“‹</div>
              <div style="font-size:13px;font-weight:600;">Weekly Health Report</div>
              <div style="font-size:12px;color:var(--muted);margin-top:4px;">Downloadable PDF</div>
            </div>
            <div style="background:var(--bg);border-radius:12px;padding:16px;text-align:center;">
              <div style="font-size:28px;margin-bottom:8px;">ğŸ‘¨â€âš•ï¸</div>
              <div style="font-size:13px;font-weight:600;">Practitioner Chat</div>
              <div style="font-size:12px;color:var(--muted);margin-top:4px;">AI-simulated consultations</div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </main>
</div>

<div id="toast"></div>
<script src="./js/app.js"></script>
</body>
</html>